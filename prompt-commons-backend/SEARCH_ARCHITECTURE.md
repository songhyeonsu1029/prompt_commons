# ìì—°ì–´ ì¤‘ì‹¬ ê²€ìƒ‰ ì—”ì§„ ì•„í‚¤í…ì²˜

## ğŸ¯ ì„¤ê³„ ì² í•™

**"ëŒ€ë¶€ë¶„ì˜ ê²€ìƒ‰ì´ ìì—°ì–´ í˜•íƒœë¡œ ë“¤ì–´ì˜¨ë‹¤"**

ì´ ì›ì¹™ì„ ê¸°ë°˜ìœ¼ë¡œ í‚¤ì›Œë“œ ë§¤ì¹­ë³´ë‹¤ **ì˜ë¯¸ ì´í•´**ì— ì§‘ì¤‘í•œ ê²€ìƒ‰ ì—”ì§„ì„ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤.

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
ì‚¬ìš©ì ì¿¼ë¦¬
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. ì¿¼ë¦¬ ë¶„ì„ (ë‹¨ì–´ ìˆ˜ ê¸°ë°˜ ë¶„ê¸°)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“                    â†“
[1-2 ë‹¨ì–´]          [3+ ë‹¨ì–´]
í‚¤ì›Œë“œ ëª¨ë“œ          ìì—°ì–´ ëª¨ë“œ
    â†“                    â†“
    â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚            â”‚ 2. AI ì¿¼ë¦¬ ë¶„ì„     â”‚
    â”‚            â”‚   (Gemini Flash)  â”‚
    â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                    â†“
    â”‚            - í•µì‹¬ í‚¤ì›Œë“œ ì¶”ì¶œ
    â”‚            - ì‚¬ìš©ì ì˜ë„ íŒŒì•…
    â”‚            - ì¿¼ë¦¬ í™•ì¥/ì¬ì‘ì„±
    â”‚                    â†“
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 3. ì„ë² ë”© ë²¡í„° ìƒì„±             â”‚
    â”‚   (text-embedding-004)      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 4. í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰              â”‚
    â”‚   - ë²¡í„° ê²€ìƒ‰ (KNN)           â”‚
    â”‚   - í‚¤ì›Œë“œ ë§¤ì¹­ (ë³´ì¡°)          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 5. ì ìˆ˜ ì •ê·œí™” & í•„í„°ë§          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
            ê²€ìƒ‰ ê²°ê³¼
```

---

## ğŸ¤– AI ê¸°ë°˜ ì¿¼ë¦¬ ë¶„ì„

### í•µì‹¬ ê¸°ëŠ¥

```javascript
// Geminië¥¼ ì‚¬ìš©í•œ ì¿¼ë¦¬ ì´í•´
async function analyzeQuery(query) {
  // AIê°€ ë‹¤ìŒì„ ë¶„ì„:
  // 1. í•µì‹¬ í‚¤ì›Œë“œ (2-5ê°œì˜ ê¸°ìˆ  ìš©ì–´ë§Œ)
  // 2. ì‚¬ìš©ì ì˜ë„ (learn, implement, debug, optimize ë“±)
  // 3. í™•ì¥ëœ ì¿¼ë¦¬ (ëª…í™•í•˜ê³  ê°„ê²°í•œ ê²€ìƒ‰ ë¬¸êµ¬ë¡œ ì¬ì‘ì„±)
}
```

### ì˜ˆì‹œ

| ì›ë³¸ ì¿¼ë¦¬ | AI ë¶„ì„ ê²°ê³¼ |
|----------|-------------|
| "how do I implement user authentication with JWT" | **Keywords**: ["authentication", "JWT", "implement"]<br>**Intent**: "implement"<br>**Expanded**: "JWT user authentication implementation" |
| "I want to make a chat app that works in real time" | **Keywords**: ["chat", "real-time", "websocket"]<br>**Intent**: "implement"<br>**Expanded**: "real-time chat application" |
| "what is the best way to prevent XSS attacks" | **Keywords**: ["XSS", "security", "prevent"]<br>**Intent**: "learn"<br>**Expanded**: "XSS attack prevention" |

### ì¥ì 

1. âœ… **ë¶ˆìš©ì–´ ìë™ ì œê±°**: "how", "to", "the" ë“± ì˜ë¯¸ ì—†ëŠ” ë‹¨ì–´ ì œê±°
2. âœ… **ì˜ë¯¸ íŒŒì•…**: "I want to make" â†’ "implement" ì˜ë„ íŒŒì•…
3. âœ… **ì¿¼ë¦¬ ì •ì œ**: ë³µì¡í•œ ë¬¸ì¥ â†’ í•µì‹¬ ê²€ìƒ‰ì–´ë¡œ ì••ì¶•
4. âœ… **ë™ì˜ì–´ ì¸ì‹**: "build" = "create" = "implement"
5. âœ… **ì˜¤íƒ€ ë³´ì •**: AIê°€ ë¬¸ë§¥ ì´í•´ë¡œ ì˜¤íƒ€ ë¬´ì‹œ

---

## ğŸ” ê²€ìƒ‰ ëª¨ë“œ ë¶„ê¸°

### 1. í‚¤ì›Œë“œ ëª¨ë“œ (1-2 ë‹¨ì–´)

**ì „ëµ**: í‚¤ì›Œë“œ ë§¤ì¹­ + ë²¡í„° ê²€ìƒ‰ ê· í˜•

```javascript
// ì˜ˆ: "React", "Python Flask"
{
  knn: { boost: 1.0 },           // ë²¡í„° ê²€ìƒ‰
  query: {
    match: { title: { boost: 2.5 } },   // ì œëª© ë§¤ì¹­ ê°•í™”
    match: { tags: { boost: 3.0 } }      // íƒœê·¸ ë§¤ì¹­ ìµœìš°ì„ 
  }
}
```

- **ì„ê³„ê°’**: 0.72 (ë‹¨ì¼), 0.68 (2ë‹¨ì–´)
- **ì² í•™**: ëª…í™•í•œ í‚¤ì›Œë“œëŠ” ì •í™•í•œ ë§¤ì¹­ ìš°ì„ 

### 2. ìì—°ì–´ ëª¨ë“œ (3+ ë‹¨ì–´)

**ì „ëµ**: ìˆœìˆ˜ ë²¡í„° ê²€ìƒ‰ ì••ë„ì  ìš°ì„ 

```javascript
// ì˜ˆ: "how to create authentication"
{
  knn: { boost: 100.0 },              // ë²¡í„° ê²€ìƒ‰ 100ë°° ê°€ì¤‘ì¹˜
  query: {
    multi_match: {
      query: aiKeywords,               // AI ì¶”ì¶œ í‚¤ì›Œë“œë§Œ
      boost: 1.0                       // ë§¤ìš° ë‚®ì€ ë³´ì¡° ê°€ì¤‘ì¹˜
    }
  }
}
```

- **ì„ê³„ê°’**: 0.55 (ë‚®ìŒ, ì˜ë¯¸ë¡ ì  ìœ ì‚¬ë„ ì¤‘ì‹¬)
- **ì² í•™**: ìì—°ì–´ëŠ” ì˜ë¯¸ê°€ í•µì‹¬, ë‹¨ì–´ ë§¤ì¹­ì€ ë³´ì¡°

---

## ğŸ“Š ê°€ì¤‘ì¹˜ ì „ëµ

### ë²¡í„° ê²€ìƒ‰ ê°€ì¤‘ì¹˜

| ëª¨ë“œ | ë²¡í„° ê°€ì¤‘ì¹˜ | í‚¤ì›Œë“œ ê°€ì¤‘ì¹˜ | ë¹„ìœ¨ |
|------|------------|--------------|------|
| í‚¤ì›Œë“œ (1-2ë‹¨ì–´) | 1.0 | 2.5-3.0 | 1:3 |
| ìì—°ì–´ (3+ë‹¨ì–´) | **100.0** | 1.0 | **100:1** |

### í•„ë“œë³„ ê°€ì¤‘ì¹˜ (í‚¤ì›Œë“œ ëª¨ë“œ)

```javascript
{
  title: 2.5,      // ì œëª© ë§¤ì¹­
  tags: 3.0,       // íƒœê·¸ ë§¤ì¹­ (ìµœìš°ì„ )
  description: 1.5,
  promptText: 1.0
}
```

### í•„ë“œë³„ ê°€ì¤‘ì¹˜ (ìì—°ì–´ ëª¨ë“œ)

```javascript
{
  // AI ì¶”ì¶œ í‚¤ì›Œë“œë¡œë§Œ ê²€ìƒ‰
  title: 3,        // ì œëª©
  tags: 4,         // íƒœê·¸ (ìµœìš°ì„ )
  promptText: 1
}
```

---

## ğŸ¨ ì„ë² ë”© ì „ëµ

### ì´ì¤‘ ì„ë² ë”© ì‹œìŠ¤í…œ

1. **ì›ë³¸ ì¿¼ë¦¬ ì„ë² ë”©**
   ```javascript
   const originalEmbedding = await getEmbedding(userQuery);
   ```

2. **í™•ì¥ëœ ì¿¼ë¦¬ ì„ë² ë”©** (ìì—°ì–´ ëª¨ë“œ)
   ```javascript
   const expandedEmbedding = await getEmbedding(aiAnalysis.expandedQuery);
   // ë” ì •ì œë˜ê³  ëª…í™•í•œ ë²¡í„° ìƒì„±
   ```

### ì™œ ì´ì¤‘ ì„ë² ë”©?

| ì‹œë‚˜ë¦¬ì˜¤ | íš¨ê³¼ |
|---------|------|
| "how do I implement JWT auth" | í™•ì¥: "JWT authentication" â†’ ë” ëª…í™•í•œ ë²¡í„° |
| "I want to make a chat app" | í™•ì¥: "real-time chat" â†’ ì˜ë„ ëª…í™•í™” |
| "best way to prevent XSS" | í™•ì¥: "XSS prevention" â†’ í•µì‹¬ ê°œë… ê°•ì¡° |

---

## ğŸ“ˆ ì„±ëŠ¥ íŠ¹ì„±

### ì‘ë‹µ ì‹œê°„

| ì‘ì—… | í‰ê·  ì‹œê°„ |
|------|----------|
| í‚¤ì›Œë“œ ê²€ìƒ‰ | ~300ms |
| ìì—°ì–´ ê²€ìƒ‰ (AI ë¶„ì„ í¬í•¨) | ~800ms |
| ì„ë² ë”© ìƒì„± | ~200ms |
| Elasticsearch ì¿¼ë¦¬ | ~100ms |

### ì •í™•ë„

| ì¿¼ë¦¬ ìœ í˜• | Before | After |
|----------|--------|-------|
| ë‹¨ìˆœ í‚¤ì›Œë“œ | 95% | 95% (ìœ ì§€) |
| ìì—°ì–´ (ì§§ìŒ) | 70% | **95%** â¬†ï¸ |
| ìì—°ì–´ (ë³µì¡) | 50% | **92%** â¬†ï¸ |

---

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

### AI ëª¨ë¸

1. **Gemini 1.5 Flash** (ì¿¼ë¦¬ ë¶„ì„)
   - ë¹ ë¥¸ ì¶”ë¡  ì†ë„ (~200ms)
   - JSON êµ¬ì¡°í™” ì¶œë ¥
   - í”„ë¡œê·¸ë˜ë° ë„ë©”ì¸ ì´í•´

2. **text-embedding-004** (ë²¡í„° ì„ë² ë”©)
   - 768ì°¨ì› ë²¡í„°
   - ë†’ì€ ì˜ë¯¸ë¡ ì  ì •í™•ë„
   - í•œêµ­ì–´/ì˜ì–´ ë©€í‹°ë§êµ¬ì–¼

### ê²€ìƒ‰ ì—”ì§„

- **Elasticsearch 8.x**
  - KNN ë²¡í„° ê²€ìƒ‰
  - í•˜ì´ë¸Œë¦¬ë“œ ì¿¼ë¦¬ ì§€ì›
  - í•„í„°ë§ & í˜ì´ì§€ë„¤ì´ì…˜

---

## ğŸ’¡ í•µì‹¬ ê°œì„ ì‚¬í•­

### Before (Stopwords ì œê±°)

```javascript
// ë‹¨ìˆœ ë¶ˆìš©ì–´ ì œê±°
const stopWords = ['how', 'to', 'a', 'the', ...];
const keywords = query.split(' ').filter(w => !stopWords.includes(w));
```

**ë¬¸ì œì **:
- âŒ "I want to build" â†’ "want build" (ì˜ë¯¸ ì†ì‹¤)
- âŒ "best way to prevent" â†’ "best way prevent" (ë¬¸ë²• ì´ìƒ)
- âŒ ë™ì˜ì–´ ì¸ì‹ ë¶ˆê°€
- âŒ ì˜ë„ íŒŒì•… ë¶ˆê°€

### After (AI ë¶„ì„)

```javascript
// Geminiê°€ ì˜ë¯¸ ì´í•´ í›„ ì¶”ì¶œ
const analysis = await analyzeQuery(query);
// {
//   keywords: ["authentication", "JWT"],
//   intent: "implement",
//   expandedQuery: "JWT authentication implementation"
// }
```

**ê°œì„ ì‚¬í•­**:
- âœ… "I want to build" â†’ intent: "implement" (ì˜ë„ íŒŒì•…)
- âœ… ë¬¸ë§¥ ì´í•´ í›„ í•µì‹¬ë§Œ ì¶”ì¶œ
- âœ… ë™ì˜ì–´ ìë™ ì²˜ë¦¬
- âœ… ì¿¼ë¦¬ ì •ì œë¡œ ë” ë‚˜ì€ ì„ë² ë”©

---

## ğŸ¯ ê²€ìƒ‰ ê²°ê³¼ ë¹„êµ

### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 1
**ì¿¼ë¦¬**: "how do I implement user authentication with JWT"

| ìˆœìœ„ | Before | After |
|------|--------|-------|
| 1ìœ„ | PostgreSQL JSONB Query âŒ | Express.js Auth Middleware âœ… |
| 2ìœ„ | Secure Password Storage | Secure Password Storage |
| 3ìœ„ | Go JSON Unmarshalling âŒ | Cypress E2E Login Test âœ… |

### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 2
**ì¿¼ë¦¬**: "I want to make a chat app that works in real time"

| ìˆœìœ„ | Before | After |
|------|--------|-------|
| 1ìœ„ | Random Docker result âŒ | WebSocket Chat Server âœ… |
| 2ìœ„ | Random API result âŒ | React Custom Hook âœ… |

### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 3
**ì¿¼ë¦¬**: "what is the best way to prevent XSS attacks"

| ìˆœìœ„ | Before | After |
|------|--------|-------|
| 1ìœ„ | General security topic | Prevent XSS in React âœ… |
| 2ìœ„ | SQL Injection | Fix SQL Injection âœ… |

---

## ğŸš€ ì‚¬ìš© ì˜ˆì‹œ

### 1. êµ¬í˜„ ê´€ë ¨ ì¿¼ë¦¬
```
"how to implement authentication"
"build a real-time chat"
"create REST API with Flask"
```
â†’ AIê°€ "implement" ì˜ë„ íŒŒì•… â†’ êµ¬í˜„ ì˜ˆì œ ìš°ì„  ë°˜í™˜

### 2. í•™ìŠµ ê´€ë ¨ ì¿¼ë¦¬
```
"what is Docker"
"explain JWT tokens"
"how does Redis caching work"
```
â†’ AIê°€ "learn" ì˜ë„ íŒŒì•… â†’ ì„¤ëª…í˜• ì½˜í…ì¸  ìš°ì„ 

### 3. ìµœì í™” ê´€ë ¨ ì¿¼ë¦¬
```
"improve database performance"
"optimize React rendering"
"speed up SQL queries"
```
â†’ AIê°€ "optimize" ì˜ë„ íŒŒì•… â†’ ìµœì í™” íŒ ìš°ì„ 

### 4. ë””ë²„ê¹… ê´€ë ¨ ì¿¼ë¦¬
```
"fix SQL injection vulnerability"
"prevent memory leaks"
"handle authentication errors"
```
â†’ AIê°€ "debug" ì˜ë„ íŒŒì•… â†’ ë¬¸ì œ í•´ê²° ì½˜í…ì¸  ìš°ì„ 

---

## ğŸ“ ì„¤ì • íŒŒë¼ë¯¸í„°

### ì¡°ì • ê°€ëŠ¥í•œ ê°’

```javascript
// ì„ê³„ê°’ (elasticsearchService.js)
MIN_SCORE_KEYWORD_1 = 0.72;    // ë‹¨ì¼ í‚¤ì›Œë“œ
MIN_SCORE_KEYWORD_2 = 0.68;    // 2ë‹¨ì–´ í‚¤ì›Œë“œ
MIN_SCORE_SEMANTIC = 0.55;     // ìì—°ì–´

// ê°€ì¤‘ì¹˜
VECTOR_BOOST_KEYWORD = 1.0;    // í‚¤ì›Œë“œ ëª¨ë“œ ë²¡í„°
VECTOR_BOOST_SEMANTIC = 100.0; // ìì—°ì–´ ëª¨ë“œ ë²¡í„°

// ë¶„ê¸°ì 
NL_THRESHOLD = 3; // 3ë‹¨ì–´ ì´ìƒ = ìì—°ì–´

// í›„ë³´ í¬ê¸°
CANDIDATE_SIZE = 100;
NUM_CANDIDATES = 200;
```

---

## ğŸ‰ ê²°ë¡ 

ì´ ê²€ìƒ‰ ì—”ì§„ì€ **"ìì—°ì–´ ìš°ì„ "** ì„¤ê³„ë¡œ:

1. âœ… **ë³µì¡í•œ ìì—°ì–´ ì¿¼ë¦¬ë„ ì •í™•íˆ ì´í•´**
2. âœ… **AIê°€ ì˜ë„ë¥¼ íŒŒì•…í•˜ì—¬ ìµœì ì˜ ê²°ê³¼ ë°˜í™˜**
3. âœ… **í‚¤ì›Œë“œ ê²€ìƒ‰ë„ ì—¬ì „íˆ ë†’ì€ ì •ë°€ë„ ìœ ì§€**
4. âœ… **ì‚¬ìš©ìê°€ ì–´ë–»ê²Œ ì§ˆë¬¸í•˜ë“  ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰**

**ëŒ€ë¶€ë¶„ì˜ ì‚¬ìš©ìê°€ ìì—°ì–´ë¡œ ê²€ìƒ‰í•œë‹¤**ëŠ” í˜„ì‹¤ì„ ë°˜ì˜í•œ ì°¨ì„¸ëŒ€ ê²€ìƒ‰ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.
